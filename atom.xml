<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Mindthecode - Rambling about code]]></title>
  <link href="http://mindthecode.com/atom.xml" rel="self"/>
  <link href="http://mindthecode.com/"/>
  <updated>2012-11-02T13:27:39+01:00</updated>
  <id>http://mindthecode.com/</id>
  <author>
    <name><![CDATA[Stef van den Ham]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Blogging with Octopress]]></title>
    <link href="http://mindthecode.com/blogging-with-octopress/"/>
    <updated>2012-10-26T11:27:00+02:00</updated>
    <id>http://mindthecode.com/blogging-with-octopress</id>
    <content type="html"><![CDATA[<p>As some of you may know, even though I don&#8217;t blog all that often, I do mess about with it a lot. Mostly on what makes it run. Switching between <a href="http://croogo.org">Croogo</a>, a custom built <a href="http://cakephp.org">CakePHP</a> site, <a href="http://wordpress.org">Wordpress</a> .. and back again.</p>

<!-- more -->


<p>For some reason none of them really seemed what I wanted. Croogo is cool enough, but actually adding posts is a hassle, and theming the thing was more of a puzle. Wordpress does the blogging thing really well, but it always feels ugly, and I had to rely on various plugins to make my post-flow work. I like writing in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>. There&#8217;s a couple of Markdown plugins for Wordpress, but I would still have to copy paste stuff in webinterface, and had to hack it to allow for code-snippet sharing.</p>

<h3>Enter Octopress</h3>

<p>I somehow stumbled upon <a href="http://octopress.org">Octopress</a> earlier this week, and decided to give it a go. Short conclusion: <em>It&#8217;s awesome</em>.</p>

<p>I won&#8217;t go into all of the features, as that&#8217;s nicely explained on their site, but basically it allows for this workflow:</p>

<ul>
<li>Run <code>rake preview</code> in the background</li>
<li>Write my posts in <a href="http://daringfireball.net/projects/markdown/">Markdown</a>, with some settings in the top such as title, publish date, etc.</li>
<li>Hit save</li>
<li>See the changes in the browser</li>
<li>When happy, <code>rake deploy</code></li>
</ul>


<p>Now, the deploy function is very awesome. It automatically generate the site to a <code>public</code> folder, commits the whole thing to your git repository, and pushes it. When linked to a Github Pages site it will auto update your site.</p>

<p>So yeah, this is good stuff, as I can just write my plain text files like I want to, and without any further webinterfacing and option clicking I can publish new articles.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spotify Boilerplate App]]></title>
    <link href="http://mindthecode.com/spotify-boilerplate-app/"/>
    <updated>2012-09-18T07:59:00+02:00</updated>
    <id>http://mindthecode.com/spotify-boilerplate-app</id>
    <content type="html"><![CDATA[<p>A while ago we were proud to be releasing 2 of the very first Spotify Apps in the Netherlands at <a href="http://noprotocol.nl" title="NoProtocol" target="_blank">NoProtocol</a>. For a long time since I&#8217;ve been planning on creating a Boilerplate in which we could put all the best practices and redo some stuff in hindsight.</p>

<p>And finally, it&#8217;s here! You can grab it at <a href="https://github.com/Hyra/Spotify-Boilerplate" title="https://github.com/Hyra/Spotify-Boilerplate" target="_blank">https://github.com/Hyra/Spotify-Boilerplate</a></p>

<p>For a bit more in-depth information, read on ..</p>

<!--more-->


<p>The Boilerplate project aims to provide a foundation upon which you can start building Spotify Apps. It takes away the hassle of writing the necessary boilerplate code and is structured so you can start developing straight away.</p>

<p>I will add to it as I stumble upon free time, but feel free to open a Pull Request or submit an issue for a suggestion</p>

<h2>Some of the features</h2>

<ul>
<li>Small footprint</li>
<li>Automatic Tab Handling</li>
<li>Automatic Deeplink handling</li>
<li>Automatic Cover Loading for playlists (mosaics)</li>
<li>Online/offline status tracking and content switching</li>
</ul>


<h2>How to set it up (on your Mac)</h2>

<ol>
<li>Sign up for a developer account on Spotify</li>
<li>Open Terminal, and if it doesn&#8217;t exist yet <code>mkdir ~/Spotify</code></li>
<li>cd ~/Spotify</li>
<li>git clone git@github.com:Hyra/Spotify-Boilerplate.git</li>
<li>Download the latest version of Spotify</li>
<li>Open Spotify and type <code>spotify:app:boilerplate</code> in the search bar</li>
</ol>


<h2>What&#8217;s in the Boilerplate</h2>

<p>The aim is to keep the Boilerplate as clean as possible, while giving all the tools to quickly develop your app.</p>

<h3>How to work with it (the short version)</h3>

<p>What you want to look for is <code>js/app.js</code>. Once index.html has been loaded by Spotify it will fire off our Sammy instance:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">app</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="s1">&#39;/home&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here you can also handle any other bootstrapping you might want to do.</p>

<p>Next up, the Sammy route gets invoked:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;home&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctxt</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">loadSection</span><span class="p">(</span><span class="nx">ctxt</span><span class="p">,</span> <span class="s2">&quot;news&quot;</span><span class="p">,</span> <span class="s2">&quot;/templates/home.html&quot;</span><span class="p">,</span> <span class="s2">&quot;js/_example_data.json&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// Callback actions</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is what you will most likely expand on for your app. The route loads a Mustache template into the DOM, parses it, asynch-y fill in the Spotify details, and cache it. After that it will run your callback actions, should you need to.</p>

<p><code>loadSection</code> takes 5 parameters at the moment:</p>

<p><strong>ctxt</strong> A reference to the <code>Sammy.Context</code> which was passed to the route</p>

<p><strong>ID</strong> A unique identifier for the content which is used as a cache-key</p>

<p><strong>Template File</strong> location to the Mustache template</p>

<p><strong>JSON Location</strong> location to the JSON you want to use. This is useful if you want to connect your app with a (RESTful) web service to feed content to your app. NOTE: If you use absolute URLs here you should add the domains to your <code>manifest.json</code></p>

<p><strong>Callback</strong> This callback function you can use to do your post-processing</p>

<h3>Dependencies</h3>

<p>The boilerplate relies on a couple of libraries:</p>

<p>Sammy.js for the routing, templating parsing and content swapping. It&#8217;s just an awesome little tool</p>

<p>jQuery as we&#8217;ve all become used to it at some point</p>

<p>Mustache as a template handler. This can just as well be any of the other gazillion templating engines out there, so feel free to hack your favourite in.</p>

<h3>Roadmap</h3>

<ul>
<li>Add more features/functionality regarding the Spotify API</li>
<li>Make the loadSection and Sammy integration a bit more seamless and less explicit</li>
<li>Spend more time documenting and writing how-to&#8217;s</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Good times with Watchr, Coffeescript and LESS]]></title>
    <link href="http://mindthecode.com/good-times-with-watchr-coffeescript-and-less/"/>
    <updated>2012-05-16T07:59:00+02:00</updated>
    <id>http://mindthecode.com/good-times-with-watchr-coffeescript-and-less</id>
    <content type="html"><![CDATA[<p>I have been working on a pure HTML front-end for one of the pet projects I&#8217;m doing. A lot of fun, but while developing, running the terminal commands to compile both the .less and .coffee files gets a tad tedious. <a href="https://github.com/mynyml/watchr">&#8220;Watchr&#8221;</a> to the rescue! With this little gem you can watch specific folders or file extensions and run commands based on the files you watch.</p>

<p>Here is how I got it set up now ..</p>

<!--more-->


<h2>Installing watchr</h2>

<p>First of all we need to get the Watchr gem installed. Assuming you have a Mac and got XCode (or at least the tools) installed, this is pretty simple:</p>

<pre><code>gem install watchr
</code></pre>

<h2>Installing coffeescript</h2>

<p>Another easy one ..</p>

<pre><code>â†’ npm install -g coffee-script
</code></pre>

<p>Don&#8217;t forget the <code>-g</code> flag as you (probably) want it to be installed globally.</p>

<h2>Installing the LESS compiler</h2>

<p>You got the hang of it now, it&#8217;s as easy as ..</p>

<pre><code>npm install -g less
</code></pre>

<h2>The fun part!</h2>

<p>Now we&#8217;re ready for the fun bit, setting up watchr to do some automagic stuff.</p>

<p>I have a typical folder structure, with the exception of a new <code>_src</code> folder which will contain all the raw coffeescript and less files.</p>

<pre><code>/index.html
/css
/js
/img
/_src
    /less
    /coffee
</code></pre>

<p>Watchr works with a config file, which basically tells it what to watch for, and what to do if it finds any changes. I placed the file inside the <code>_src</code> folder and named it <code>watchr.rb</code></p>

<p>Here&#8217;s my config file at the moment:</p>

<pre><code>def compile_less
    %x[lessc less/bootstrap/bootstrap.less ../css/main.css --yui-compress]
end

def compile_coffee
    %x[coffee -c -j ../js/app.js coffee/]
end

def do_growl(message)
    growlnotify = `which growlnotify`.chomp
  title = "Watchr Message"
  passed = message.include?('0 failures, 0 errors')
  image = passed ? "~/.watchr_images/passed.png" : "~/.watchr_images/failed.png"
  severity = passed ? "-1" : "1"
  options = "-w -n Watchr --image '#{File.expand_path(image)}'"
  options &lt;&lt; " -m '#{message}' '#{title}' -p #{severity}"
  system %(#{growlnotify} #{options} &amp;)
end

do_growl "Watching folders and waiting for changes .."

watch('less/*') { |m|
    # Recompile LESS files
    compile_less
    do_growl "LESS Compiled and Compressed!"
}

watch('coffee/*') { |m|
    # Recompile Coffeescripts
    compile_coffee
    do_growl "Coffeescripts compiled and concatenated!"
}
</code></pre>

<p>As you can see at the bottom I&#8217;m watching the 2 folders seperately, as I want to run different commands for them. For the project I&#8217;m working on I&#8217;m using Twitter Bootstrap, so rather than compiling all the .less files to seperate .css files I just want to compiled bootstrap.less as that @imports all the things it needs. When it&#8217;s done with that it yui-compresses the lot and writes the output to <code>css/main.css</code>. Pretty cool!</p>

<p>The compile_coffee command does something pretty similar. Whenever a .coffee file in the coffee folder changes it will compile them all and combine the output (notice the <code>-j</code> flag) and write it to <code>js/app.js</code>.</p>

<p>To get the show on the road, cd to the _src folder, and run:</p>

<pre><code>watchr watchr.rb
</code></pre>

<p>You may have noticed the <code>do_growl</code> function, which doesn&#8217;t really add value except that it&#8217;s just cool to get a Growl message whenever it has done it&#8217;s thing. To get that bit working you have to install <a href="http://growl.info/extras.php#growlnotify">&#8220;Growl Notify&#8221;</a>.</p>

<p>If you&#8217;re not that interested, or you don&#8217;t have a Mac with Growl simply remove the function and the do_growl calls from the watch patterns.</p>

<p>I&#8217;m sure I could optimize this a bit, and add variables for output folders and options, but for now it&#8217;s simple, working, and pretty damn cool.</p>

<p>Let me know how you get your watchr set up!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Format associative JSON to work with Knockout.js]]></title>
    <link href="http://mindthecode.com/format-associative-json-to-work-with-knockout-js/"/>
    <updated>2012-05-09T10:43:00+02:00</updated>
    <id>http://mindthecode.com/format-associative-json-to-work-with-knockout-js</id>
    <content type="html"><![CDATA[<p>I recently started creating a RESTful API in CakePHP to work with a Knockout.js frontend.</p>

<p>While Knockout.js is a lot of fun, it does expect your JSON to be in a certain format.</p>

<!--more-->


<p>Take the following response from a simple <code>find</code> action:</p>

<pre><code>"Projects": [
    {
        "Project": {
            "id": "151",
            "title": "Een ander project",
            "slug": "een-ander-project",
            "description": "dsfdsfs",
            "tasks_count": "2",
            "tasks_backlog": "2",
            "tasks_open": "0",
            "tasks_closed": "0",
            "duedate": "2012-04-09",
            "created": "2012-04-09 13:52:19",
            "modified": "2012-04-09 13:52:19"
        },
        "Task": [ ]
    },
    {
        "Project": {
            "id": "152",
            "title": "Een ander project",
            "slug": "een-ander-project-1",
            "description": "dsfdsfs",
            "tasks_count": null,
            "tasks_backlog": null,
            "tasks_open": null,
            "tasks_closed": null,
            "duedate": "2012-04-09",
            "created": "2012-04-09 13:55:30",
            "modified": "2012-04-09 13:55:30"
        },
        "Task": [ ]
    },
</code></pre>

<p>This is fine to work with in your typical View, but Knockout rather has a nested format, and doesn&#8217;t like the leading <code>Project</code> nodes. You could write custom parsers in Knockout, but would quickly become a hell to maintain.</p>

<p>Instead, I wrote a little function to reformat the response to get the result Knockout likes:</p>

<pre><code>public function formatResponse($data) {
    $ret = array();
    foreach($data as $key) {
        $keys = array_keys($key);
        $t = $key[$keys[0]];
        for($i=1; $i&lt;count($keys); $i++) {
            $t[Inflector::pluralize(strtolower($keys[$i]))] = $key[$keys[$i]];
        }
        $ret[] = $t;
    }

    return $ret;
}

$projects = $this-&gt;Project-&gt;find('all');
$projects = $this-&gt;formatResponse($projects);
$this-&gt;set(compact('projects'));
$this-&gt;set('_serialize', array('projects'));
</code></pre>

<p>This will reformat the Projects response to:</p>

<pre><code>"projects": [
    {
        "id": "151",
        "title": "Een ander project",
        "slug": "een-ander-project",
        "description": "dsfdsfs",
        "tasks_count": "2",
        "tasks_backlog": "2",
        "tasks_open": "0",
        "tasks_closed": "0",
        "duedate": "2012-04-09",
        "created": "2012-04-09 13:52:19",
        "modified": "2012-04-09 13:52:19",
        "tasks": [ ]
    },
    {
        "id": "152",
        "title": "Een ander project",
        "slug": "een-ander-project-1",
        "description": "dsfdsfs",
        "tasks_count": null,
        "tasks_backlog": null,
        "tasks_open": null,
        "tasks_closed": null,
        "duedate": "2012-04-09",
        "created": "2012-04-09 13:55:30",
        "modified": "2012-04-09 13:55:30",
        "tasks": [ ]
    },
</code></pre>

<p>This way I don&#8217;t have to worry about modifying the core of how Knockout.js works with JSON, and focus on developing the front-end of my app instead.</p>

<p>It will probably be classier to put the function in something like an <code>afterFind</code>, but for now it will do nicely.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Sessions in PHPUnit Tests with CakePHP]]></title>
    <link href="http://mindthecode.com/using-sessions-in-phpunit-tests-with-cakephp/"/>
    <updated>2012-02-24T11:43:00+01:00</updated>
    <id>http://mindthecode.com/using-sessions-in-phpunit-tests-with-cakephp</id>
    <content type="html"><![CDATA[<p>I was breaking my head over failing unit tests when trying to test a simple Controller that was saving a new record.</p>

<p>Turned out it was failing only on the command line, while the webversion was passing all the tests.</p>

<p>Luckily, the solution was simple ..</p>

<!--more-->


<p>The PHPUnit command line suite apparently outputs contents early, before the session gets initiated.</p>

<h2>Solution 1</h2>

<p>Add &#8211;stderr to the command line:</p>

<pre><code>cake testsuite app Controller/YourFancyController --stderr
</code></pre>

<p>This will pass the tests again, as it doesn&#8217;t output contents early to <code>STDOUT</code>. The only &#8220;problem&#8221; is you won&#8217;t see the awesome green and red colors in the CLI output anymore.</p>

<h2>Solution 2</h2>

<p>This is the one I use, as it brings the colors back.</p>

<p>As I&#8217;m using my self-contained PHPUnit Install, as found on Github @ <a href="https://github.com/hyra/PHPUnit-Cake2">PHPUnit-Cake2</a> I am able to edit the following file: <code>Vendor/PHPUnit/Autoload.php</code> At the very top of this file, initialize the session early:</p>

<pre><code>session_start();
</code></pre>

<p>This will pass the tests again, and even better, bring back the colors!</p>

<p>Maybe the session initialization can be done early by putting it in a file by CakePHP itself, but haven&#8217;t found the right place yet. Any suggestions?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Spotify Preview Build expired]]></title>
    <link href="http://mindthecode.com/spotify-preview-build-expired/"/>
    <updated>2012-02-11T17:16:00+01:00</updated>
    <id>http://mindthecode.com/spotify-preview-build-expired</id>
    <content type="html"><![CDATA[<p>Today I decided to tinker some more on our Spotify App, only to find that the Preview Build had expired, and was not gonna launch. Period. Great, so now what?</p>

<!--more-->


<h2>Small update</h2>

<p>From IRC:</p>

<p><code>chiel: Hi guys, just a small update about the expired preview build we're aware of the issue and will put a new one up today however, we're in San Francisco for a hackday, where it is now 8.30am, so bear with us for a moment.</code></p>

<h2>Back to basics</h2>

<p>I downloaded the normal user version, and obviously my application didn&#8217;t fully work. Most noticably the <code>application</code> node had disappeared from the <code>models</code> class, even though it&#8217;s still present at the developer resource page.</p>

<p>This means one can&#8217;t change tabs in the following way anymore:</p>

<pre><code>application.observe(models.EVENT.ARGUMENTSCHANGED, handleArgs);

function handleArgs() {
    var args = models.application.arguments;
    $(".section").hide();   // Hide all sections
    $("#"+args[0]).show();  // Show current section
}
</code></pre>

<h2>So now what?</h2>

<p>I did some digging, and noticed <code>sp.core</code> has some eventListeners. After some fiddling I can now switch tabs again by doing the following:</p>

<pre><code>sp.core.addEventListener('argumentsChanged', function() {
    $(".section").hide();                   // Hide all sections
    $("#"+sp.core.getArguments()).show();   // Show current section
});
</code></pre>

<p>Nothe most elegant, and I&#8217;ll probably be able to change it back to the original code when the new Preview Build comes out, but for now I can at least work on the App.</p>

<h2>Broken?</h2>

<p>Any one else noticing things that have stopped working and found some workarounds? Do share below!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Updated LESS component for CakePHP]]></title>
    <link href="http://mindthecode.com/updated-less-component-for-cakephp/"/>
    <updated>2012-02-05T10:28:00+01:00</updated>
    <id>http://mindthecode.com/updated-less-component-for-cakephp</id>
    <content type="html"><![CDATA[<p>I decided to have a look at Twitter Bootstrap 2, and had it run through my LESS Component. I then realized the component didn&#8217;t support subfolders!</p>

<!--more-->


<p>So this is just to let you guys know I wrote a small tweak, and now it works perfectly :)</p>

<p>If you have any other alterations you would like to see feel free to fork, or drop me a comment below.</p>

<p>The new version: https://github.com/Hyra/less</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Loading external files in PHP the better way]]></title>
    <link href="http://mindthecode.com/loading-external-files-in-php-the-better-way/"/>
    <updated>2011-12-06T19:37:00+01:00</updated>
    <id>http://mindthecode.com/loading-external-files-in-php-the-better-way</id>
    <content type="html"><![CDATA[<p>Sometimes you run into &#8220;weird behavior&#8221; when using <code>file_get_contents</code> in your code when retrieving external data. I noticed this for instance when accessing the Facebook Graph API the other day. When using file_get_contents the results were so much different than when using cUrl.</p>

<!--more-->


<p>Sometimes even, it is disabled on your host for security reasons. So i&#8217;m making it a habbit to run everything through cUrl instead. Not just to get the &#8220;actual results&#8221;, but also since it&#8217;s a lot faster.</p>

<h2>Faster you say?</h2>

<p>Indeed! Take this benchmark for instance, <code>file_get_contents</code> vs <code>curl</code> on google.com:</p>

<pre><code>[1] =&gt; Array   // 1 request to google.com
(
    [FGC] =&gt;  0.4955058 // 38.88% slower
    [CURL] =&gt; 0.3582108
)
[5] =&gt; Array   // 5 requests to google.com
(
    [FGC] =&gt;  2.2415568 // 24.44% slower
    [CURL] =&gt; 1.7973249
)    
[10] =&gt; Array  // 10 requests to google.com
(
    [FGC] =&gt;  4.7877922 // 29.46% slower
    [CURL] =&gt; 3.6951289
)    
[25] =&gt; Array  // 25 requests to google.com
(
    [FGC] =&gt;  10.932404 // 10.18% slower
    [CURL] =&gt; 9.9168329
)    
[50] =&gt; Array  // 50 requests to google.com
(
    [FGC] =&gt;  22.535982 // 24.74% slower
    [CURL] =&gt; 18.068931
)    
[100] =&gt; Array // 100 requests to google.com
(
    [FGC] =&gt;  44.685283 // 18.57% slower
    [CURL] =&gt; 37.688820
)
</code></pre>

<p>Sure, it might not seem that big a difference. But imagine loading an external file being a big part of your (heavily) used application.</p>

<h2>Got an example ?</h2>

<p>Sure, no worries. Rather than calling:</p>

<pre><code>$data = file_get_contents('http://whatever.com/sheep.jpg');
</code></pre>

<p>you could do:</p>

<pre><code>function loadFile($url) {
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

$data = loadFile('http://whatever.com/sheep.jpg');
</code></pre>

<p>And you&#8217;re done.</p>

<h2>Thoughts?</h2>

<p>Anyone else experiencing different results between cUrl and the builtin function? I&#8217;ve been googling what could cause this, but so far nothing conclusive.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PHPUnit Installer updated to 3.6.4]]></title>
    <link href="http://mindthecode.com/phpunit-installer-updated-to-3-6-4/"/>
    <updated>2011-11-29T12:12:00+01:00</updated>
    <id>http://mindthecode.com/phpunit-installer-updated-to-3-6-4</id>
    <content type="html"><![CDATA[<p>Just a small update .. I updated the PHPUnit Installer Shell for CakePHP 2.0 to use version 3.6.4.</p>

<p>All dependencies have been updated as well, so it&#8217;s 23% more awesome.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installing PHPUnit manually for CakePHP 2.0]]></title>
    <link href="http://mindthecode.com/installing-phpunit-manually-for-cakephp-2-0/"/>
    <updated>2011-11-11T16:50:00+01:00</updated>
    <id>http://mindthecode.com/installing-phpunit-manually-for-cakephp-2-0</id>
    <content type="html"><![CDATA[<p>I was trying to get into Unit Testing a few months ago. It was a steep learning curve and eventually I gave myself a non-excuse and decided to wait for Cake 2.0 as that would have PHPUnit and it &#8220;wouldn&#8217;t make sense to learn SimpleTest&#8221; at that time.</p>

<p>I intend to keep that promise and have been trying to get into Unit Testing for real this time. The first thing was also the most annoying so far: installing the <em>(&amp;#(</em>&amp;. After completely messing up my local PEAR environment I gave up on the &#8220;official way&#8221; and wrote a <code>PHPUnit Installer Shell</code> to install PHPUnit along with the Cake site.</p>

<!--more-->


<h2>PHPUnit locally?</h2>

<p>Yes! I&#8217;m a fan of self-contained systems. Sure, installing PHPUnit through PEAR <em>should</em> provide a systemwide tool, but when you&#8217;re working on multiple workstations and deploy to different hosting setups its just nice to know you have everything within reach. Besides, my MAMP setup on OSX Lion didn&#8217;t play nice with PEAR <strong>at all</strong> so enough excuses to write an installer shell.</p>

<h2>What it does</h2>

<p>It&#8217;s quite simple really, it downloads all the files and folders that PHPUnit needs, makes them into a nice package and moves them into the <code>app</code> folder, ready for you to play with!</p>

<h2>How do I get it</h2>

<p>I just pushed it to Github: <a href="https://github.com/Hyra/PHPUnit-Cake2">Get the installer Shell here</a></p>

<p>The README there provides you with the rest of the information.</p>

<p>I&#8217;ll post some updates on my journey when I can, meanwhile: If you have any optimialisations, ideas on Unit Testing in general or some good pointers .. let me know!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Use GZip with PHP]]></title>
    <link href="http://mindthecode.com/use-gzip-with-php/"/>
    <updated>2011-10-14T09:35:00+02:00</updated>
    <id>http://mindthecode.com/use-gzip-with-php</id>
    <content type="html"><![CDATA[<p>I recently started using GZip headers in my websites and the results are simply amazing. Right up there with coffee, sneezing polar bears and green traffic lights.</p>

<p>Nowadays, files are big. People used to optimize graphics and CSS stylesheets. This day and age we just don&#8217;t care anymore. At the same time bandwidth is getting more expensive and the mobile market is growing bigger. Not a good combination.</p>

<!--more-->


<h2>Enter GZip</h2>

<p>Adding GZip to your applications couldn&#8217;t be simpler, and using this compression to your output can reduce the amount of data being sent by around <strong>70-80%</strong> for your average stylesheets. That&#8217;s what you call weight-loss.</p>

<p>I recently built the backend of a mobile application, which relied on a JSON interface. Data being sent to the phone was around <code>250kb</code>. Optimizing the content, only returning the bare minimum the phone needed to work resulted in the file being <code>197kb</code>. So, I added the GZip compression and guess what. The resulting file was <code>14kb</code>. Awesome.</p>

<h2>So how do I use it</h2>

<p>Simple. At the top of your PHP file you add the following:</p>

<pre><code>@ob_start ('ob_gzhandler');
header('Content-type: text/html; charset: UTF-8');
header('Cache-Control: must-revalidate');
header("Expires: " . gmdate('D, d M Y H:i:s', time() - 1) . ' GMT');
</code></pre>

<p>This will tell the server to first zip the contents, before sending it back to the client, where it is deflated.</p>

<p>The only caveat is that you must have <code>mod_gzip</code> installed as an Apache module, but most hosting providers install this by default. Just make sure yours does too.</p>

<h2>As a CakePHP component</h2>

<p><a href="http://josediazgonzalez.com/" title="Jose Gonzales">Jose Gonzales</a> made a nice little plugin to use GZip in your Cake Applications. Find it at <a href="https://github.com/josegonzalez/gzip-component/" title="CakePHP Gzip Component">Github</a> Basically, all you have to do is add the plugin to your <code>plugins</code> folder, and then add the following to your <code>app_controller.php</code></p>

<pre><code>var $components = array('Gzip.Gzip');
</code></pre>

<p>And you&#8217;re good to go.</p>

<p>Enjoy!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using LESS in CakePHP]]></title>
    <link href="http://mindthecode.com/using-less-in-cakephp/"/>
    <updated>2011-09-10T12:15:00+02:00</updated>
    <id>http://mindthecode.com/using-less-in-cakephp</id>
    <content type="html"><![CDATA[<p>I was a bit bored this morning with my previous Less component, so decided to rewrite the thing and added some new features such as caching. It&#8217;s pretty straightforward and simple to set up. If you can&#8217;t wait, the code is available <a href="https://github.com/Hyra/less">here</a>. For more information, read on.</p>

<!--more-->


<p>This little helper converts your .less files into .css without relying on Node.js</p>

<h2>Installation</h2>

<h3>Clone</h3>

<p>Clone from github: in your plugin directory type:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git clone https://github.com/Hyra/less.git less
</span></code></pre></td></tr></table></div></figure>


<h3>Submodule</h3>

<p>Add as Git submodule: in your plugin directory type:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git submodule add https://github.com/Hyra/less.git less
</span></code></pre></td></tr></table></div></figure>


<h3>Manual</h3>

<p>Download as archive from github and extract to <code>app/plugins/less</code></p>

<p>Next, create a folder <code>less</code> in <code>app/webroot/</code> and apply <code>chmod 777</code> to it.</p>

<h2>Usage</h2>

<p>In your <code>app_controller.php</code> add the helper:</p>

<pre><code>public $helpers = array('Less.Less');
</code></pre>

<p>Now every <code>.less</code> file from <code>webroot/less</code> will be converted to its <code>.css</code> equivalent in <code>webroot/css</code></p>

<p>In your <code>default.ctp</code> layout you can just use <code>echo $this-&gt;Html-&gt;css('your_css_file');</code> as you always do</p>

<h2>Features</h2>

<ul>
<li>Conversion happens on every request while in development mode <code>(debug at 0)</code></li>
</ul>


<p>Again, it&#8217;s not much .. but I like simple things that make working on projects more fun, so it&#8217;s all good.</p>

<p>I probably should update the helper again soon to make it work with CakePHP 2.0, but haven&#8217;t decided when to make the switch yet. Then again, you guys can always fork and help out, of course ;)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Markdown in CakePHP]]></title>
    <link href="http://mindthecode.com/using-markdown-in-cakephp/"/>
    <updated>2011-07-10T18:06:00+02:00</updated>
    <id>http://mindthecode.com/using-markdown-in-cakephp</id>
    <content type="html"><![CDATA[<p>Markdown rocks. I lately fell in love with it when I was setting up this very blog. You can just write easy-to-read and easy-to-write plain text files, and Markdown takes care of the rest.</p>

<!--more-->


<p>For this blog I had used a Markdown script I found that parses plain text and outputs it as HTML. It allows me to write posts in a simple/plain format and just pump it into the database <code>as is</code>. For a while I wanted to make it into a more solid CakePHP Helper. And today I did. Setting it up couldn&#8217;t be simpler, and using it is a matter of adding it as a call in your views.</p>

<p>I put it on Github @ <a href="https://github.com/Hyra/markdown" title="CakePHP Markdown Github">Markdown for CakePHP</a> along with the necessary instructions and usage example.</p>

<p>Hope you enjoy it, and if you have any suggestions or tips, don&#8217;t hesitate to leave a comment or Fork it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to remove a SubModule from your Git repository]]></title>
    <link href="http://mindthecode.com/how-to-remove-a-submodule-from-your-git-repository/"/>
    <updated>2011-05-26T19:44:00+02:00</updated>
    <id>http://mindthecode.com/how-to-remove-a-submodule-from-your-git-repository</id>
    <content type="html"><![CDATA[<p>Submodules are awesome. Adding them is easy enough. But how about getting rid of them again? In this short post I&#8217;ll share how to do just that.</p>

<!--more-->


<p>We all know having submodules in Git is very handy. You don&#8217;t have to check all of the code in, just the reference and, when needed, initialize them.</p>

<h2>Traces of submodules</h2>

<p>When installing a submodule in Git it does a couple of things. It adds a <code>record</code> to your <code>.gitmodules</code> file. When this file doesn&#8217;t exist it will create one. An example of this is:</p>

<pre><code>[submodule "some/nice/folder"]
    path = some/nice/folder
    url = git://github.com/your_idol/awesome.git
</code></pre>

<p>Secondly, it adds the URLs/mappings to your <code>.git/config</code> file. This is done when you use <code>git init submodule</code>.</p>

<p>Last but not least, it adds references to the submodule in your commits.</p>

<h2>Fine, but how do I get rid of them?</h2>

<p>The first two traces are easy enough to remove. Just open up <code>.gitmodules</code> and remove the reference to it. Next, open up <code>.git/config</code> and remove the mappings there as well. Last, but not least, use the following command from the root directory of your git repository:</p>

<pre><code>$ git rm --cached path/to/submodule
</code></pre>

<p>Notice that you have to leave out the trailing slash, else the command will moan about it.</p>

<p>And that&#8217;s it! Your submodule is gone.</p>

<p>Hope this helps anyone.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to handle multiple domains with CakePHP]]></title>
    <link href="http://mindthecode.com/how-to-handle-multiple-domains-with-cakephp/"/>
    <updated>2011-05-22T22:49:00+02:00</updated>
    <id>http://mindthecode.com/how-to-handle-multiple-domains-with-cakephp</id>
    <content type="html"><![CDATA[<p>Lately, we&#8217;ve been working with multiple environments/servers for our websites to be able to have them approved by clients before going live. However, following set up can also work nicely when you develop your sites locally and don&#8217;t want to keep changing the configuration every time you upload it.</p>

<!--more-->


<h2>Setting up the database config file</h2>

<p>So, what changes in your config? Not all that much. Let&#8217;s have a look at the default database.php config file</p>

<pre><code>class DATABASE_CONFIG {

    var $default = array(
    'driver' =&gt; 'mysql',
    'persistent' =&gt; false,
    'host' =&gt; 'localhost',
    'login' =&gt; 'user',
    'password' =&gt; 'password',
    'database' =&gt; 'database_name',
    'prefix' =&gt; '',
    );

    var $test = array(
    'driver' =&gt; 'mysql',
    'persistent' =&gt; false,
    'host' =&gt; 'localhost',
    'login' =&gt; 'user',
    'password' =&gt; 'password',
    'database' =&gt; 'test_database_name',
    'prefix' =&gt; '',
    );
}
</code></pre>

<p>The <code>$default</code> database config is used when you don&#8217;t specify anything. The <code>$test</code> database is used by SimpleTest. Let&#8217;s say you want to have a <code>local</code> environment and one for when you&#8217;re on your live/production server. Below is the database config I use</p>

<pre><code>class DATABASE_CONFIG {

    var $local = array(
        'driver' =&gt; 'mysql',
        'persistent' =&gt; false,
        'encoding' =&gt; 'utf8',
        'host' =&gt; 'localhost',
        'login' =&gt; 'root',
        'password' =&gt; 'root',
        'database' =&gt; '',
        'prefix' =&gt; '',
        'port' =&gt; '/Applications/MAMP/tmp/mysql/mysql.sock',
    );

    var $production = array(
        'driver' =&gt; 'mysql',
        'persistent' =&gt; false,
        'encoding' =&gt; 'utf8',
        'host' =&gt; 'localhost',
        'login' =&gt; '',
        'password' =&gt; '',
        'database' =&gt; '',
        'prefix' =&gt; '',
        'port' =&gt; '',
    );

    public function __construct() {
        if(isset($_SERVER['SERVER_NAME'])) {
            switch($_SERVER['SERVER_NAME']) {
                // Are we working locally?
                case 'www.YOURLOCALURL.com':
                    $this-&gt;default = $this-&gt;local;
                    Configure::write('debug', 2);
                    break;
                case 'www.YOURLIVEURL.com':
                    $this-&gt;default = $this-&gt;production;
                    Configure::write('debug', 0);
                    break;
                default:
                    $this-&gt;default = $this-&gt;production;
                    Configure::write('debug', 0);
                    break;
            }
        } else {
            // If there's no SERVER_NAME we're probably using bake from the command line, so use local
            $this-&gt;default = $this-&gt;local;
        }
    }
</code></pre>

<p>As you can see we check the <code>$_SERVER['SERVER_NAME']</code> . Locally I like to work with <code>dev.domain.com</code> domains, but if you&#8217;re using some sort of <code>localhost</code> structure this will work fine as well. So, depending on the server(name) you&#8217;re on the correct database credentials are put into the <code>$default</code> config. Obviously, you can extend the database configs as much as you want. We usually work with 4 arrays: local, development, staging and production. As a bonus, we can set the <code>debug value</code> for these environments accordingly as well.</p>

<h2>Thoughts?</h2>

<p>I have been considering putting this logic in the <code>bootstrap.php</code>, but not sure if this is where one would want this logic. Do you guys use a similar setup, or know ways to improve or extend this? Let me know in the comments!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using SASS in your next CakePHP project]]></title>
    <link href="http://mindthecode.com/using-sass-in-your-next-cakephp-project/"/>
    <updated>2011-04-14T22:49:00+02:00</updated>
    <id>http://mindthecode.com/using-sass-in-your-next-cakephp-project</id>
    <content type="html"><![CDATA[<p>I heard a lot about SASS, mostly a lot of people raving about how it was the best thing since chocolate. When I first saw some examples I thought the idea was good, but didn&#8217;t see the point of learning a new syntax in order to not having to use the CSS syntax. Because, honestly, how does typing some curly brackets and semicolons hurt?</p>

<p>I did like the idea of inheretance by indentation though. By indenting subsequent selectors it saves a lot of repetitive class assigning and declarations. But I hate adding extra layers onto things. It just feels clunky and wrong. But with Compass your .sass files get compiled to proper CSS files that reside in your /webroot/css folder. Cool! How? Read on.</p>

<!--more-->


<h2>SASS</h2>

<p>SASS is an abbrevation of <a href="http://sass-lang.com/" title="Sass - Syntactically Awesome Stylesheets">Syntactically Awesome Style Sheets</a>. While I don&#8217;t really agree with the Syntactially Awesome bit, it IS awesome in that it relies on your syntax. It supports nested rules, selector inheretance, mixins, variables, and even more.</p>

<h2>Installing Compass</h2>

<p><a href="http://compass-style.org/" title="Compass">Compass</a> is basically an authoring framework which you install that manages your SASS files and offers plugins supporting CSS frameworks such as 960.gs, Susy and Blueprint. It runs from the command line and is just awesome.</p>

<p>For the Mac users it&#8217;s easy. Open up the Terminal and go:</p>

<pre><code>gem install compass
</code></pre>

<p>This will utilize Ruby to install Compass for you along with Sass.</p>

<h2>Setting up Compass to work with CakePHP</h2>

<p>Now for the fun part, getting Compass to work with Cake! Open up the Terminal again and do:</p>

<pre><code>$ cd &lt;your project folder&gt;
$ mkdir sass
$ cs sass
$ touch config.rb
</code></pre>

<p>This sass dir will be our home base for the SASS-stuff. Edit the config.rb file we just created and put in:</p>

<pre><code>http_path = "/"
sass_dir = 'src'
css_dir = '../app/webroot/css'
images_dir = '../app/webroot/img'
javascripts_dir = '../app/webroot/js'
http_stylesheets\_path = 'css'
http_javascripts\_path = 'js'
http_images\_path = 'img'
environment = :development
output_style = :compressed
</code></pre>

<p>This basically tells Compass where we will have our SASS files (sass_dir) and to save the compiled CSS files and where the other diectories are. Not the output_style. This tells Compass how to compile them. I usually have it on :expanded during development so it&#8217;s easier on the eyes when opening the CSS file.</p>

<p>Now, we&#8217;re good to go. Go back to the Terminal, and in your sass-directory, type:</p>

<pre><code>$ compass install blueprint/semantic
</code></pre>

<p>This is just an example. You can use whatever framework you feel comfortable with, or use the compass default project ones. You will notice the &#8216;src&#8217; folder has been created and you have a few Sass files to work on.</p>

<p>I usually create a file <code>\_base.sass</code> in <code>src/partials</code> and in screen.scss add:</p>

<pre><code>@import 'partials/base';
</code></pre>

<p>Notice the underscore in the filename, but not in the import.</p>

<p>In the Terminal, still in your <code>sass</code> directory, type:</p>

<pre><code>$ compass watch
</code></pre>

<p>This will run Compass in watch-mode and when it detects any changes in the <code>src</code> directory, it will automagically save the compiled files to webroot/css</p>

<p>Awesome! So open up your <code>\_base.sass</code>, start typing Sass, and when you hit Save it will have an awesome stylesheet in your <code>css</code> directory.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Setting up CakePHP with MAMP Pro on Mac OSX]]></title>
    <link href="http://mindthecode.com/setting-up-cakephp-with-mamp-pro-on-mac-osx/"/>
    <updated>2011-04-11T16:00:00+02:00</updated>
    <id>http://mindthecode.com/setting-up-cakephp-with-mamp-pro-on-mac-osx</id>
    <content type="html"><![CDATA[<p>I&#8217;d like to use my first post to describe how I set up new projects in a simple way that works best for me. My setup is pretty straight-forward, really. I know some people who mess about with include-paths so they can run multiple <em>apps</em> on one cake-install, but since I work for various clients and even more various projects I like my project folders to be self-contained.</p>

<!--more-->


<h2>Downloading CakePHP</h2>

<p>Easy enough. Grab a fresh copy of <a href="https://github.com/cakephp/cakephp/downloads">CakePHP @ Github</a></p>

<p>Unzip the package and copy the extracted folder to your Sites directory (mine is in /Users/Hyra/Sites) and rename the folder to the project you want to work on. For example: www.fantasticnewsite.org</p>

<h2>Setting up CakePHP</h2>

<p>I won&#8217;t go through the all of the options as it&#8217;s perfectly documented <a href="http://book.cakephp.org/#!/view/912/Installation" title="The Manual :: 1.3 Collection">here at the CakePHP Book</a> but what I usually do is the following:</p>

<ol>
<li>Rename /app/config/database.php.default to /app/config/database.php and fill in the database credentials in $default</li>
<li><p>Open up the Terminal and run (for example):</p>

<p>chmod 777 ~/Sites/www.fantasticnewsite.org/app/tmp</p></li>
<li><p>Open up /app/config/core.php and change the values for:</p>

<p>Security.salt</p>

<p>Security.cipherSeed</p></li>
</ol>


<p>That&#8217;s it really. Of course, there&#8217;s a bunch of extra stuff you can set up, but that&#8217;s all outlined <a href="http://book.cakephp.org/#!/view/915/Advanced-Installation" title="The Manual :: 1.3 Collection">here</a> if you want to read up on it.</p>

<h2>Setting up MAMP Pro</h2>

<p>Optional. If you have any form of AMP setup already running, by all means, skip this step. I just happen to run MAMP Pro for ease and comfort.</p>

<p>Open up MAMP Pro and go to the Hosts tab and simply:</p>

<ol>
<li>Hit the plus-sign</li>
<li>Give the site a name at which you want to access it locally</li>
<li>Browse to the location you want the site to be located</li>
<li>Hit apply</li>
</ol>


<p>By this point you should be able to point your <a href="http://www.mozilla.com/en-US/firefox/new/" title="Mozilla | Firefox web browser &amp; Thunderbird email client">favourite browser</a> to your fresh local domain at http://www.fantasticnewsite.org</p>
]]></content>
  </entry>
  
</feed>
