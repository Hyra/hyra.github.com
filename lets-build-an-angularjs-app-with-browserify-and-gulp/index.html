<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><meta http-equiv="cleartype" content="on"><link rel="icon" type="image/png" href="/favicon.ico"><link href="/styles/main.css" rel="stylesheet"><link href="http://mindthecode.com/feed.xml" type="application/atom+xml" rel="alternate" title="Mindthecode Feed"><link rel="author" href="https://plus.google.com/102230925443628784177?rel=author"><meta property="fb:admins" content="1322812414"><meta property="og:type" content="article"><meta property="og:image" content="http://mindthecode.com/images/og_image.png"><meta property="og:site_name" content="Mindthecode"><meta property="fb:app_id" content="116332715192025"><meta name="twitter:creator" content="@stefvdham"><meta name="twitter:card" content="summary"><meta name="twitter:image:" content="http://mindthecode.com/images/og_image.png"><title>Let's build: An AngularJS app with Browserify and Gulp</title><link rel="canonical" href="http://mindthecode.com/lets-build-an-angularjs-app-with-browserify-and-gulp/"><meta name="twitter:title" content="Let's build: An AngularJS app with Browserify and Gulp"><meta name="twitter:description" content="I want to show a generic workflow and setup I have used a lot lately when working on building apps with Angular. It uses Gulp as a CI system and Browserify to minimize code clutter and maximize awesomeness."><meta property="og:title" content="Let's build: An AngularJS app with Browserify and Gulp"><meta property="og:description" content="I want to show a generic workflow and setup I have used a lot lately when working on building apps with Angular. It uses Gulp as a CI system and Browserify to minimize code clutter and maximize awesomeness."><meta property="og:url" content="http://mindthecode.com/lets-build-an-angularjs-app-with-browserify-and-gulp/"><meta name="description" content="I want to show a generic workflow and setup I have used a lot lately when working on building apps with Angular. It uses Gulp as a CI system and Browserify to minimize code clutter and maximize awesomeness."></head><body><header role="header" class="header"><div class="container"><div class="bg"></div><div style="position: relative;" class="contents"><div class="logo"><a href="/"><img src="/images/logo_trans.png"></a></div><p class="tagline">Blogging about all things web, solving the web one pixel at the time.</p><div class="nav"><ul><li><a href="/">Blog</a><a href="/about.html">About</a></li></ul></div><div id="yoggrt"><script src="http://cdn.yoggrt.com/yoggrt.js?legacyid=1296349&amp;zoneid=1353&amp;key=1f38bbf962ef9784f7733343a37f39b0&amp;serve=C6SD52Y&amp;placement=mindthecode" id="_yoggrt_js"></script></div></div></div><div class="badge"><a href="/"><img src="/images/badge.png"></a></div></header><div class="container"><div class="content"><div class="post-head group"><a href="/lets-build-an-angularjs-app-with-browserify-and-gulp/"><h1 class="post-title">Let's build: An AngularJS app with Browserify and Gulp</h1></a><h4 class="postDate"><span>May 5, 2014</span></h4></div><div class="post-body markdown"><p>Today I want to show a generic workflow and setup I have used a lot lately when working on building apps with Angular. It uses Gulp as a CI system and Browserify to minimize code clutter and maximize awesomeness. So let&#39;s jump in.</p>
<p>Instead of starting from a cloned code repository let&#39;s build our setup together. From scratch. This way you know what each piece does, and allows you to tweak it to your liking. Of course, the final product can be found <a href="https://github.com/Hyra/angular-gulp-browserify-livereload-boilerplate">here</a> at Github, but it might be better to use it as a reference rather than a starting point.</p>
<h2><a name="folder-structure" class="anchor" href="#folder-structure"><span class="header-link"></span></a>Folder structure</h2>
<p>When building a web application I tend to have an <code>app</code> folder for the original source files, and a <code>dist</code> folder which contains all the processed files and will serve as the root directory for the webserver. So let&#39;s create the following folder structure:</p>
<pre><code><div class="highlight"><pre><span class="nx">app</span>
  <span class="nx">index</span><span class="p">.</span><span class="nx">html</span>
  <span class="nx">images</span>            <span class="c1">// Visual assets</span>
  <span class="nx">scripts</span>           <span class="c1">// Your javascript</span>
     <span class="nx">controllers</span>
     <span class="nx">directives</span>
     <span class="nx">services</span>
     <span class="nx">main</span><span class="p">.</span><span class="nx">js</span>        <span class="c1">// Single main entry point</span>
  <span class="nx">styles</span>            <span class="c1">// SCSS or LESS or CSS files</span>
  <span class="nx">views</span>             <span class="c1">// Templates</span>
<span class="nx">dist</span>                <span class="c1">// The target and &#39;www&#39; folder</span>
<span class="nx">Gulpfile</span><span class="p">.</span><span class="nx">js</span>         <span class="c1">// Gulp instructions file</span>
<span class="kr">package</span><span class="p">.</span><span class="nx">json</span>        <span class="c1">// Package file with installation references</span>
</pre></div>
</code></pre>
<h2><a name="getting-some-modules" class="anchor" href="#getting-some-modules"><span class="header-link"></span></a>Getting some modules</h2>
<p>To get everything up and running, let&#39;s first get some NPM modules we want to work with. Depending on your personal preferences you might want to replace some of them or add other ones to suit your specific needs. The modules I usually install are:</p>
<h3><a name="gulp" class="anchor" href="#gulp"><span class="header-link"></span></a>Gulp</h3>
<p>This is the workhorse of our setup.</p>
<h3><a name="angular" class="anchor" href="#angular"><span class="header-link"></span></a>Angular</h3>
<p>We will install Angular through NPM so we can require it with browserify.</p>
<h3><a name="browserify" class="anchor" href="#browserify"><span class="header-link"></span></a>Browserify</h3>
<p>Browserify allows us to utilize the <code>require()</code> syntax we love in NodeJS in our front-end. Can you spell u.n.i.c.o.r.n.s ?</p>
<h3><a name="gulp-browserify" class="anchor" href="#gulp-browserify"><span class="header-link"></span></a>gulp-browserify</h3>
<p>This allows us to run Browserify from within our Gulpfile.</p>
<h3><a name="gulp-clean" class="anchor" href="#gulp-clean"><span class="header-link"></span></a>gulp-clean</h3>
<p>Allows us to clean (empty) a folder or file, which is nice to make sure we don&#39;t end up with any artifacts.</p>
<h3><a name="gulp-concat" class="anchor" href="#gulp-concat"><span class="header-link"></span></a>gulp-concat</h3>
<p>When using browserify for our code we want to concat it to a single bundled javascript file. This plugin allows us to do just that.</p>
<h3><a name="gulp-jshint" class="anchor" href="#gulp-jshint"><span class="header-link"></span></a>gulp-jshint</h3>
<p>We all love syntactically correct code, don&#39;t we? This plugin checks your javascript files and tells you when something is wrong. Or not pretty enough.</p>
<h3><a name="gulp-util" class="anchor" href="#gulp-util"><span class="header-link"></span></a>gulp-util</h3>
<p>General gulp utilities, such as colour in your <code>gutil.log()</code> calls, and handy methods for common operations such as <code>replaceExtension()</code> and <code>noop()</code>.</p>
<h3><a name="gulp-embedlr-gulp-livereload-tiny-lr-connect-livereload-express" class="anchor" href="#gulp-embedlr-gulp-livereload-tiny-lr-connect-livereload-express"><span class="header-link"></span></a>gulp-embedlr, gulp-livereload, tiny-lr, connect-livereload, express</h3>
<p>These I use so I can run a local webserver and support live reloading of the app as we save files.</p>
<p>And this will do fine for now. So! Let&#39;s install all these babies, and save them to our <code>package.json</code> by adding <code>--save-dev</code></p>
<pre><code class="lang-bash"><div class="highlight"><pre><span class="nv">$ </span>npm install gulp browserify gulp-browserify gulp-clean gulp-concat gulp-jshint gulp-util gulp-embedlr gulp-livereload tiny-lr connect-livereload express --save-dev
</pre></div>
</code></pre>
<h2><a name="configuring-our-gulpfile" class="anchor" href="#configuring-our-gulpfile"><span class="header-link"></span></a>Configuring our Gulpfile</h2>
<p>Now we have all the components in place it&#39;s time to write our Gulpfile. Let&#39;s start small and expand as we go along.</p>
<p>First, let&#39;s make sure we can <code>watch</code> our javascript files, and as they change, run them through JSHint and have Browserify bundle the code into a single file:</p>
<pre><code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">),</span>
    <span class="nx">gutil</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-util&#39;</span><span class="p">),</span>
    <span class="nx">jshint</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-jshint&#39;</span><span class="p">),</span>
    <span class="nx">browserify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-browserify&#39;</span><span class="p">),</span>
    <span class="nx">concat</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-concat&#39;</span><span class="p">),</span>
    <span class="nx">clean</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-clean&#39;</span><span class="p">);</span>

<span class="c1">// JSHint task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;lint&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./app/scripts/*.js&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">jshint</span><span class="p">())</span>
  <span class="c1">// You can look into pretty reporters as well, but that&#39;s another story</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">jshint</span><span class="p">.</span><span class="nx">reporter</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// Browserify task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;browserify&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Single point of entry (make sure not to src ALL your files, browserify will figure it out for you)</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">([</span><span class="s1">&#39;app/scripts/main.js&#39;</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">browserify</span><span class="p">({</span>
    <span class="nx">insertGlobals</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">debug</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}))</span>
  <span class="c1">// Bundle to a single file</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="s1">&#39;bundle.js&#39;</span><span class="p">))</span>
  <span class="c1">// Output it to our dist folder</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/js&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;lint&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Watch our scripts</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;app/scripts/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;app/scripts/**/*.js&#39;</span><span class="p">],[</span>
    <span class="s1">&#39;lint&#39;</span><span class="p">,</span>
    <span class="s1">&#39;browserify&#39;</span>
  <span class="p">]);</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>So far so good! Whenever we change code in our javascript files a fresh bundle.js is created for us to use in our site.</p>
<h2><a name="set-up-our-index-html-file" class="anchor" href="#set-up-our-index-html-file"><span class="header-link"></span></a>Set up our index.html file</h2>
<p>Let&#39;s create a simple <code>index.html</code> file so we can see our work in the browser. Open up <code>index.html</code> and add something like the following:</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span> <span class="na">ng-app=</span><span class="s">&quot;myApp&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>My Awesome App<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">ng-controller=</span><span class="s">&#39;WelcomeCtrl&#39;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>My Awesome App<span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>{{testVar}}<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/js/bundle.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</code></pre>
<p>The above should look familiar. We include our bundle.js file we created earlier at the bottom, initiate a ng-app by adding the directive to the html tag, attach a controller to the body and have a simple variable in the body so we can see if things work. Which at this point is a NO. Let&#39;s fix that.</p>
<p>First of all, we want this index.html file to be added to our <code>dist</code> folder so we can actually serve it. We can do this by adding an extra task:</p>
<pre><code><div class="highlight"><pre><span class="c1">// Views task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;views&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Get our index.html</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;app/index.html&#39;</span><span class="p">)</span>
  <span class="c1">// And put it in the dist folder</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/&#39;</span><span class="p">));</span>

  <span class="c1">// Any other view files from app/views</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./app/views/**/*&#39;</span><span class="p">)</span>
  <span class="c1">// Will be put in the dist/views folder</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/views/&#39;</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>We can also set up another watcher in the watch task to pick up any changes as we build:</p>
<pre><code><div class="highlight"><pre><span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;app/index.html&#39;</span><span class="p">,</span> <span class="s1">&#39;app/views/**/*.html&#39;</span><span class="p">],</span> <span class="p">[</span>
  <span class="s1">&#39;views&#39;</span>
<span class="p">]);</span>
</pre></div>
</code></pre>
<p>At the moment we pretty much have a working app. We just can&#39;t see it. Let&#39;s change this by adding a self contained webserver, straight from our Gulp.</p>
<h2><a name="webserver-with-live-reload" class="anchor" href="#webserver-with-live-reload"><span class="header-link"></span></a>Webserver with live reload</h2>
<p>First of all, we need to add some modules to our Gulpfile that allows us to run a mini express server.</p>
<pre><code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">embedlr</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-embedlr&#39;</span><span class="p">),</span>
    <span class="nx">refresh</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-livereload&#39;</span><span class="p">),</span>
    <span class="nx">lrserver</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;tiny-lr&#39;</span><span class="p">)(),</span>
    <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">),</span>
    <span class="nx">livereload</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;connect-livereload&#39;</span><span class="p">),</span>
    <span class="nx">livereloadport</span> <span class="o">=</span> <span class="mi">35729</span><span class="p">,</span>
    <span class="nx">serverport</span> <span class="o">=</span> <span class="mi">5000</span><span class="p">;</span>

<span class="c1">// Set up an express server (but not starting it yet)</span>
<span class="kd">var</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="c1">// Add live reload</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">livereload</span><span class="p">({</span><span class="nx">port</span><span class="o">:</span> <span class="nx">livereloadport</span><span class="p">}));</span>
<span class="c1">// Use our &#39;dist&#39; folder as rootfolder</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="s1">&#39;./dist&#39;</span><span class="p">));</span>
<span class="c1">// Because I like HTML5 pushstate .. this redirects everything back to our index.html</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="s1">&#39;/*&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">sendfile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">root</span><span class="o">:</span> <span class="s1">&#39;dist&#39;</span> <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>Next, let&#39;s start the server. You can do this from any task, but let&#39;s create a <code>dev</code> task for the fun of it.</p>
<pre><code><div class="highlight"><pre><span class="c1">// Dev task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Start webserver</span>
  <span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">serverport</span><span class="p">);</span>
  <span class="c1">// Start live reload</span>
  <span class="nx">lrserver</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">livereloadport</span><span class="p">);</span>
  <span class="c1">// Run the watch task, to keep taps on changes</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="s1">&#39;watch&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>Now, when you run <code>gulp dev</code> it will kickstart our internal webserver with our <code>dist</code> folder as root. You can verify everything is working by navigating to <a href="http://localhost:5000">http://localhost:5000</a></p>
<p>If all is well you should see the <code>index.html</code> show up. Whenever you change a file however, the changes won&#39;t automatically show up in the browser. This is because we have to manually invoke the server refresh from within our task. Let&#39;s modify our <code>views</code> task to automatically refresh the browser after it has done its work:</p>
<pre><code><div class="highlight"><pre><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;views&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./app/index.html&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/&#39;</span><span class="p">));</span>

  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;./app/views/**/*&#39;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/views/&#39;</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">refresh</span><span class="p">(</span><span class="nx">lrserver</span><span class="p">));</span> <span class="c1">// Tell the lrserver to refresh</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>Now, whenever you change a view file, the server will reload. Of course, you can do this whenever you want. So feel free to add it in the <code>browserify</code> task as well.</p>
<h2><a name="add-some-angular" class="anchor" href="#add-some-angular"><span class="header-link"></span></a>Add some Angular</h2>
<p>We are getting somewhere. All that&#39;s missing is some actual Angular code. So let&#39;s add some. Open up the <code>main.js</code> file and put in the following:</p>
<pre><code><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">angular</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;angular&#39;</span><span class="p">);</span> <span class="c1">// That&#39;s right! We can just require angular as if we were in node</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;HelloCtrl&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">test</span> <span class="o">=</span> <span class="s1">&#39;Test varretjes&#39;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>In main.js we can now use Node&#39;s <code>require()</code> way to include modules we want. This is not limited to our own code, we can use most of the ~50k published modules on mpjs.org. When we run <code>gulp browserify</code> Browserify will figure out what code to pull in, and will bundle it in our <code>bundle.js</code>. Good stuff.</p>
<p>Of course, the controller code should move to a file of its own in the controllers directory so we can actually use the <code>require</code> technique. So let&#39;s do just that.</p>
<p>Create a new file <code>controllers/WelcomeCtrl.js</code> and add in the following:</p>
<pre><code><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">WelcomeCtrl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">testVar</span> <span class="o">=</span> <span class="s1">&#39;We are up and running from a required module!&#39;</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">WelcomeCtrl</span><span class="p">;</span>
</pre></div>
</code></pre>
<p>Notice we use <code>module.exports</code> to expose (parts of) our code, as you do with modules. This way we can <code>require</code> them from our <code>main.js</code> file and use it as a module. Let&#39;s change <code>main.js</code> to use our fresh module:</p>
<pre><code><div class="highlight"><pre><span class="s1">&#39;use strict&#39;</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">angular</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;angular&#39;</span><span class="p">);</span> <span class="c1">// That&#39;s right! We can just require angular as if we were in node</span>

<span class="kd">var</span> <span class="nx">WelcomeCtrl</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./controllers/WelcomeCtrl&#39;</span><span class="p">);</span> <span class="c1">// We can use our WelcomeCtrl.js as a module. Rainbows.</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span> <span class="p">[]);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;WelcomeCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="nx">WelcomeCtrl</span><span class="p">]);</span>
</pre></div>
</code></pre>
<p>This is obviously a very bare example, but you can see how using simple <code>require</code> calls will save a lot of script tags in your index.html, and having your files behave as modules helps you write re-usable code.</p>
<h2><a name="jshint-rc" class="anchor" href="#jshint-rc"><span class="header-link"></span></a>JSHint.rc</h2>
<p>You might have noticed <code>gulp lint</code> gives us some errors. That&#39;s because it needs some guidance, as it doesn&#39;t know about our <code>require</code> and preferences. Let&#39;s add a file called <code>.jshintrc</code> and add in the following configuration:</p>
<pre><code><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;node&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;browser&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;esnext&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;bitwise&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;camelcase&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;curly&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;eqeqeq&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;immed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;indent&quot;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;latedef&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;newcap&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;noarg&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;quotmark&quot;</span><span class="o">:</span> <span class="s2">&quot;single&quot;</span><span class="p">,</span>
  <span class="s2">&quot;regexp&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;undef&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;unused&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;strict&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;trailing&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;smarttabs&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</code></pre>
<p>You may or may not agree with any of these settings, so feel free to tweak them.</p>
<h2><a name="sass-support" class="anchor" href="#sass-support"><span class="header-link"></span></a>SASS Support</h2>
<p>You may have a CSS pre-processor of choice, so let&#39;s add support for this. I usually go with SASS, but of course this is adaptable to your liking. Let&#39;s install a new module named <code>gulp-sass</code> and include it in our Gulpfile.</p>
<pre><code class="lang-bash"><div class="highlight"><pre><span class="nv">$ </span>npm install gulp-sass gulp-autoprefixer --save-dev
</pre></div>
</code></pre>
<pre><code><div class="highlight"><pre><span class="kd">var</span> <span class="nx">sass</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-sass&#39;</span><span class="p">);</span>
<span class="c1">// Not necessary, but I like this one, it automatically adds prefixes for all browsers</span>
<span class="kd">var</span> <span class="nx">autoprefixer</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-autoprefixer&#39;</span><span class="p">);</span>
</pre></div>
</code></pre>
<p>Next, let&#39;s write a task for it:</p>
<pre><code><div class="highlight"><pre><span class="c1">// Styles task</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;styles&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">&#39;app/styles/*.scss&#39;</span><span class="p">)</span>
  <span class="c1">// The onerror handler prevents Gulp from crashing when you make a mistake in your SASS</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">sass</span><span class="p">({</span><span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="p">}</span> <span class="p">}))</span>
  <span class="c1">// Optionally add autoprefixer</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">autoprefixer</span><span class="p">(</span><span class="s2">&quot;last 2 versions&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt; 1%&quot;</span><span class="p">,</span> <span class="s2">&quot;ie 8&quot;</span><span class="p">))</span>
  <span class="c1">// These last two should look familiar now :)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">&#39;dist/css/&#39;</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">refresh</span><span class="p">(</span><span class="nx">lrserver</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
</code></pre>
<p>And add another watcher.</p>
<pre><code><div class="highlight"><pre><span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">&#39;app/styles/**/*.scss&#39;</span><span class="p">],</span> <span class="p">[</span>
  <span class="s1">&#39;styles&#39;</span>
<span class="p">]);</span>
</pre></div>
</code></pre>
<p>Now, whenever you make changes to your SASS files it will compile it to CSS and live-reload our webserver. Good times.</p>
<h2><a name="wrapping-up" class="anchor" href="#wrapping-up"><span class="header-link"></span></a>Wrapping up</h2>
<p>We&#39;ve done quite a lot. We have set up a webserver, added Gulp to automate all our tasks, added live reloading for easy developing, sass processing, and added support for Browserify so we can script in style.</p>
<p>I created a repository with the above so you can check the finished project, which you can find <a href="https://github.com/Hyra/angular-gulp-browserify-livereload-boilerplate">here</a>.</p>
<p>I hope the above was of some help, and if you have any questions feel free to find me on <a href="http://twitter.com/stefvdham">Twitter</a>, or leave a comment below.</p>
<p>Happy coding.</p>
</div><!-- Social sharing icons--><div class="social"><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a><div data-size="medium" data-annotation="bubble" data-width="300" class="g-plusone"></div><div data-width="100" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true" class="fb-like"></div></div><hr><h3>Read the next post</h3><a href="/recording-a-website-with-phantomjs-and-ffmpeg/">Recording a website with PhantomJS and FFMpeg</a><br><br><h3>Read the previous post</h3><a href="/how-to-use-environment-variables-in-your-angular-application/">How to use environment variables in your Angular application</a><hr><!-- Disqus comments--><div id="comments"><div id="disqus_thread"></div></div><!-- Helper scripts for social share icons--><!-- Hacker News--><script type="text/javascript">(function(d, t) {
  var g = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  g.src = '//hnbutton.appspot.com/static/hn.min.js';
  s.parentNode.insertBefore(g, s);
}(document, 'script'));
</script><!-- Twitter--><script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script><!-- Google Plus--><script type="text/javascript">(function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
</script><!-- Disqus--><script type="text/javascript">var disqus_shortname = 'mindthecode'; // required: replace example with your forum shortname
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script><!-- Facebook--><div id="fb-root"></div><script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=116332715192025";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script></div></div><div class="follow_block"><a href="https://twitter.com/stefvdham" class="twitter-follow-button" data-show-count="false" data-show-screen-name="true">Follow @stefvdham</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></div><footer><a href="/"><img src="/images/logo_small.png"></a><p>&copy; 2010 - 2014</p></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js" type="text/javascript"></script><script src="/scripts/main.js" type="text/javascript"></script><script>if(window.devicePixelRatio) { $("#logo").attr('src', '/images/logo@2x.png'); }
var _gaq = _gaq || [];
var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-20048990-9']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script><script src="/scripts/jquery.readingTime.js"></script><script>$(document).ready(function(){
  $('.post-body').readingTime();
});</script></body></html>